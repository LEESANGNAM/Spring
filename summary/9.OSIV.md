# OSIV

### OSIV(Open Session In View)
#### OSIV가 작동할 때

![스크린샷 2021-08-08 오전 1 13 17](https://user-images.githubusercontent.com/61412496/128606610-1ea6df3a-4ae5-4d09-acb7-0eaad0c1e255.png)

+ 영속성 컨텍스트를 뷰 까지 열어두는 기능이다. 
+ 커넥션 시작부터 API 응답이 끝날 때 까지 영속성 컨텍스트가 유지된다.
+ Controller에서도 지연 로딩을 사용 할 수 있다.
+ DB커넥션을 유지하기 때문에 큰 장점이 될 수도 있지만, 오랫동안 사용하기 때문에 실시간 트래픽이 몰리면 커넥션이 부족해 장애로 이어질 수 있다.

#### OSIV가 작동하지 않을 때

![스크린샷 2021-08-08 오전 1 21 46](https://user-images.githubusercontent.com/61412496/128606888-14a6f84a-4292-4c6a-9826-7a5b1dd03919.png)

+ 트랜잭션을 종료할 때 영속성 컨텍스트를 닫고, 데이터베이스 커넥션도 반환한다.
+ 커넥션 리소스를 낭비하지 않는다.
+ 모든 지연로딩을 트랜잭션 안에서 처리해야 한다.
+ 지연로딩 코드를 트랜잭션 안으로 넣어야 하는 단점이 있다.
+ 